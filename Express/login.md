## 로그인 이란?

유튜브에서 로그인을 하면 구독, 저장한 비디오들이 나오는 것들은

로그인한 사람이 누구인지 웹사이트가 알고있기 때문에 가능한 것이다. 즉, 유저를 기억할 수 있는 것이다.

## Cookie

유저를 기억하는 방법중 하나는 유저에게 쿠키를 보내는 것이다.

먹는 과자가 아니다!

쿠키를 이해하려면 세션을 먼저 이해해야 한다.

## Session

세션은 백엔드와 브라우저 간에 어떤 활동을 했는지 기억하는것을 말한다.

어떤 사이트에 로그인 하고 있다면, 그건 브라우저와 해당 사이트의 백엔드 사이에 세션이 존재하는것을 말한다.

하지만 특정 시간(보통 2주 정도)가 지나면 로그인 기록은 사라질 것이다. 즉 세션은 브라우저의 백엔드 사이의 memory 혹은 histroy 이다.

하지만 세션이 작동하려면 백엔드와 브라우저가 서로에 대한 정보를 가지고 있어야한다.

백엔드에서 단순히 사이트만 render 하는 기능이 있다면,
http method를 통해 한번 서버와 연결 되었다가 그냥 끊어지게 된다. 더이상 연결이 존재하지 않는걸 stateless(무상태) 라고 한다.
한번 연결된 뒤 둘 사이 연결에 state가 없는것.

그래서 서버는 유저가 백엔드에 뭔가 요청할 때 마다 알아볼 수 있어야 한다.
유저가 로그인 할 때 서버가 유저에게 ID카드 같은걸 준다고 상상해보자. 그 뒤 유저가 서버에게 요청할 때마다 ID카드를 보여주면
서버는 ID카드를 통해 해당 유저음을 인식할 수 있다.

## [express-session](https://www.npmjs.com/package/express-session

express-session 이라는 Middleware를 설치하면 session 사용이 가능하다.
이 packeage를 설치하고, middleware들을 작동시키는 서버 파일에 다음과 같이 입력해주자. `(라우터 전에 입력해 줘야 한다!)`
~~~
app.use(
  session({
    secret: "Hello!",
    resave: true,
    saveUninitialized: true,
  })
);
~~~
이렇게 하면 세션은 사이트로 들어오는 모두를 기억하게 된다. 로그인을 하지 않더라도!
