## ëª©ì°¨

1. [ìŠ¤í”„ë§ ë™ì‘ ì›ë¦¬ íŒŒì•…](#1ì¥-ìŠ¤í”„ë§-ë™ì‘-ì›ë¦¬-íŒŒì•…)
2. [ìŠ¤í”„ë§ ì‹œíë¦¬í‹°](#2ì¥-ìŠ¤í”„ë§-ì‹œíë¦¬í‹°)
3. [ORM, JPA ì˜ì†ì„±, DB](#4ì¥-ORM,-JPA-ì˜ì†ì„±,-DB)

# 1ì¥ ìŠ¤í”„ë§ ë™ì‘ ì›ë¦¬ íŒŒì•…

## Controllerì˜ ì¥ì 

1. HTTP request, response ì²˜ë¦¬ë¥¼ ìœ„í•´ ë§¤ë²ˆ ì‘ì„±í•´ì•¼ í•˜ëŠ” ì¤‘ë³µì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ìƒëµí•  ìˆ˜ ìˆë‹¤.
2. APIë¥¼ ë” ê¹”ë”í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. ìœ ì‚¬í•œ ì„±ê²©ì˜ APIë“¤ì„
   í•˜ë‚˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ê´€ë¦¬ ê°€ëŠ¥.
3. ARCë¥¼ ì´ìš©í•´ API ë™ì‘ ê²€ì¦ì„ ê°„ë‹¨íˆ í•  ìˆ˜ ìˆë‹¤.

## ìŠ¤í”„ë§ MVC ì´í•´ - Response

- ìŠ¤í”„ë§ MVC

  - MVC (Model - View - Controller) ë””ìì¸ íŒ¨í„´

- Server ì—ì„œ HTML ì„ ë‚´ë ¤ ì£¼ëŠ” ê²½ìš°

  1. ì •ì  (static) ì›¹ í˜ì´ì§€

     - **Controller**
       1. Client ì˜ ìš”ì²­ì„ **Model** ë¡œ ë°›ì•„ ì²˜ë¦¬
          1. ì˜ˆ) íšŒì›ê°€ì…ì„ ìœ„í•œ ê°œì¸ ì •ë³´ë“¤ (id, password, name)
       2. Client ì—ê²Œ **View** (ì •ì  ì›¹ í˜ì´ì§€, HTML) ë¥¼ ë‚´ë ¤ì¤Œ

  2. ë™ì  (dynamic) ì›¹ í˜ì´ì§€

  - **Controller**
    1. Client ì˜ ìš”ì²­ì„ **Model** ë¡œ ë°›ì•„ ì²˜ë¦¬
    2. Template engine ì—ê²Œ **View**, **Model** ì „ë‹¬
       1. **View**: ë™ì  HTML íŒŒì¼
       2. **Model**: View ì— ì ìš©í•  ì •ë³´ë“¤
    3. Template engine
       1. **View** ì— **Model** ì„ ì ìš© â†’ ë™ì  ì›¹í˜ì´ì§€ ìƒì„±
          1. ì˜ˆ) ë¡œê·¸ì¸ ì„±ê³µ ì‹œ, "ë¡œê·¸ì¸ëœ ì‚¬ìš©ìì˜ id" ë¥¼ í˜ì´ì§€ì— ì¶”ê°€
          2. Template engine ì¢…ë¥˜: íƒ€ì„ë¦¬í”„ (Thymeleaf), Groovy, FreeMarker, Jade ë“± (ìŠ¤í”„ë§ì—ì„œ JSP ì´ìš©ì€ ì¶”ì²œí•˜ì§€ ì•Šê³  ìˆìŒ)
    4. Client ì—ê²Œ **View** (ë™ì  ì›¹ í˜ì´ì§€, HTML) ë¥¼ ë‚´ë ¤ì¤Œ

# 2ì¥ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°

## ì›¹ì˜ ì¸ì¦ ë° ì¸ê°€

- ì¸ì¦ (Authentication): ì‚¬ìš©ì ì‹ ì›ì„ í™•ì¸í•˜ëŠ” í–‰ìœ„
- ì¸ê°€ (Authorization): ì‚¬ìš©ì ê¶Œí•œì„ í™•ì¸í•˜ëŠ” í–‰ìœ„

ì›¹ì—ì„œì˜ ì¸ì¦ ë° ì¸ê°€

- ì¸ì¦: ë¡œê·¸ì¸ì„ í†µí•´ ë³¸ì¸ì„ì„ í™•ì¸ (ì£¼ë¡œ, ì•„ì´ë””ì™€ íŒ¨ìŠ¤ì›Œë“œ ì´ìš©)
- ì¸ê°€: ì£¼ë¡œ ì—­í• ì— ë”°ë¥¸ ì‚¬ìš© ê¶Œí•œ ê´€ë¦¬
  ì˜ˆ) ì›¹ ì¹´í˜ ì‚¬ì´íŠ¸ì—ì„œ íšŒì› ë­í‚¹ ë³„ ê°€ëŠ¥í•œ ì²¨ë¶€íŒŒì¼ í¬ê¸°ë¥¼ ë‹¤ë¥´ê²Œ ë¶€ì—¬

## ì¿ í‚¤ì™€ ì„¸ì…˜

ê¸°ë³¸ì ìœ¼ë¡œ HTTPëŠ” Stateless, ì¦‰ ìƒíƒœë¥¼ ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì¿ í‚¤ì™€ ì„¸ì…˜ì´ ì¡´ì¬í•©ë‹ˆë‹¤.

ì¿ í‚¤ì™€ ì„¸ì…˜ ëª¨ë‘ HTTP ì— ìƒíƒœ ì •ë³´ë¥¼ ìœ ì§€(Stateful)í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì¦‰, ì¿ í‚¤ì™€ ì„¸ì…˜ì„ í†µí•´ ì„œë²„ì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ ë³„ë¡œ ì¸ì¦ ë° ì¸ê°€ë¥¼ í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

- ì¿ í‚¤

  - í´ë¼ì´ì–¸íŠ¸ì— ì €ì¥ë  ëª©ì ìœ¼ë¡œ ìƒì„±í•œ ì‘ì€ ì •ë³´ë¥¼ ë‹´ì€ íŒŒì¼ ì…ë‹ˆë‹¤.
  - êµ¬ì„±ìš”ì†Œ
    - **Name** (ì´ë¦„): ì¿ í‚¤ë¥¼ êµ¬ë³„í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” í‚¤ (ì¤‘ë³µë  ìˆ˜ ì—†ìŒ)
    - **Value** (ê°’): ì¿ í‚¤ì˜ ê°’
    - Domain (ë„ë©”ì¸): ì¿ í‚¤ê°€ ì €ì¥ëœ ë„ë©”ì¸
    - Path (ê²½ë¡œ): ì¿ í‚¤ê°€ ì‚¬ìš©ë˜ëŠ” ê²½ë¡œ
    - Expires (ë§Œë£Œê¸°í•œ): ì¿ í‚¤ì˜ ë§Œë£Œê¸°í•œ (ë§Œë£Œê¸°í•œ ì§€ë‚˜ë©´ ì‚­ì œë©ë‹ˆë‹¤.)

- ì„¸ì…˜
  - ì„œë²„ì—ì„œ ì¼ì •ì‹œê°„ ë™ì•ˆ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©
  - ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ë³„ë¡œ ìœ ì¼ë¬´ì´í•œ 'ì„¸ì…˜ ID' ë¥¼ ë¶€ì—¬í•œ í›„ í´ë¼ì´ì–¸íŠ¸ ë³„ í•„ìš”í•œ ì •ë³´ë¥¼ ì„œë²„ì— ì €ì¥
  - ì„œë²„ì—ì„œ ìƒì„±í•œ 'ì„¸ì…˜ ID' ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ì¿ í‚¤ê°’('ì„¸ì…˜ ì¿ í‚¤' ë¼ê³  ë¶€ë¦„)ìœ¼ë¡œ ì €ì¥ë˜ì–´ í´ë¼ì´ì–¸íŠ¸ ì‹ë³„ì— ì‚¬ìš©ë¨
  - ì„¸ì…˜ ë™ì‘ ë°©ì‹
    - 1. í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— 1ë²ˆ ìš”ì²­
    - 2. ì„œë²„ê°€ ì„¸ì…˜ID ë¥¼ ìƒì„±í•˜ê³ , ì‘ë‹µ í—¤ë”ì— ì „ë‹¬
         1. ì„¸ì…˜ ID í˜•íƒœ: "SESSIONID = 12A345"
    - 3. í´ë¼ì´ì–¸íŠ¸ê°€ ì¿ í‚¤ë¥¼ ì €ì¥ ('ì„¸ì…˜ì¿ í‚¤')
    - 4. í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— 2ë²ˆ ìš”ì²­
         - ì¿ í‚¤ê°’ (ì„¸ì…˜ ID) í¬í•¨í•˜ì—¬ ìš”ì²­
    - 5. ì„œë²„ê°€ ì„¸ì…˜ID ë¥¼ í™•ì¸í•˜ê³ , 1ë²ˆ ìš”ì²­ê³¼ ê°™ì€ í´ë¼ì´ì–¸íŠ¸ì„ì„ ì¸ì§€

## ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í”„ë ˆì„ì›Œí¬

'ìŠ¤í”„ë§ ì‹œíë¦¬í‹°' í”„ë ˆì„ì›Œí¬ëŠ” ìŠ¤í”„ë§ ì„œë²„ì— í•„ìš”í•œ ì¸ì¦ ë° ì¸ê°€ë¥¼ ìœ„í•´ ë§ì€ ê¸°ëŠ¥ì„ ì œê³µí•´ ì¤Œìœ¼ë¡œì¨ ê°œë°œì˜ ìˆ˜ê³ ë¥¼ ëœì–´ ì¤ë‹ˆë‹¤. ë§ˆì¹˜ 'ìŠ¤í”„ë§' í”„ë ˆì„ì›Œí¬ê°€ ì›¹ ì„œë²„ êµ¬í˜„ì— í¸ì˜ë¥¼ ì œê³µí•´ ì£¼ëŠ” ê²ƒì²˜ëŸ¼ìš”!

# 4ì¥ ORM, JPA ì˜ì†ì„±, DB

- 1. ORMì´ë€?
     ğŸ’¡ ORM: Object-Relational Mapping

  Object: **"ê°ì²´"**ì§€í–¥ ì–¸ì–´ (ìë°”, íŒŒì´ì¬)
  Relational: **"ê´€ê³„í˜•"** ë°ì´í„°ë² ì´ìŠ¤ (H2, MySQL)

- 2. JPAëŠ”?

  ğŸ’¡ JPA: Java Persistence API
  ìë°” ORM ê¸°ìˆ ì— ëŒ€í•œ í‘œì¤€ ëª…ì„¸

## JPA ì˜ì†ì„± ì»¨í…ŒìŠ¤íŠ¸

- JPA
  - **ê°ì²´** - ORM - **DB**
  - **ê°ì²´** - **ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì ¸** (entity context manager) - **DB**
- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì ¸
  - ê°ì²´ â†” DB ì˜ ì†Œí†µì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬
- PK (Primary Key)
  - í…Œì´ë¸”ì—ì„œ ê° row ë§ˆë‹¤ ê°€ì ¸ì•¼ í•˜ëŠ” ìœ ì¼ë¬´ì´í•œ ê°’ (Null í—ˆìš©ë˜ì§€ ì•ŠìŒ)
  - ë³´í†µ í…Œì´ë¸” ID ë¥¼ PK ë¡œ ì„¤ì • (ì¸ì¡°í‚¤)

## DBì˜ ì—°ê´€ê´€ê³„

- DB ì˜ ì—°ê´€ê´€ê³„

  - JPA ê°€ ì œê³µí•˜ëŠ” ì—°ê´€ê´€ê³„ëŠ” ê²°êµ­ DB ì˜ ì—°ê´€ê´€ê³„ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•¨
  - ë”°ë¼ì„œ ë¨¼ì € DB ì˜ ì—°ê´€ê´€ê³„ë¥¼ ì´í•´í•´ì•¼ í•¨
  - DB ì˜ ì—°ê´€ê´€ê³„ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì— ë§ì¶° ì´ë£¨ì–´ì§

- 'ìŒì‹ ë°°ë‹¬ ì„œë²„'ë¥¼ ê°œë°œí•œë‹¤ê³  ê°€ì •

  - íšŒì› 1ëª…ì€ ì£¼ë¬¸ Nê°œë¥¼ í•  ìˆ˜ ìˆë‹¤.
    - íšŒì› : ì£¼ë¬¸ = 1 : N ê´€ê³„
  - ìŒì‹ 1ê°œëŠ” ì£¼ë¬¸ Nê°œì— í¬í•¨ë  ìˆ˜ ìˆë‹¤.
    - ìŒì‹ : ì£¼ë¬¸ = 1 : N ê´€ê³„
  - ê²°ë¡ ì ìœ¼ë¡œ
    - íšŒì› : ìŒì‹ = N : N ê´€ê³„

## JPA ì—°ê´€ê´€ê³„

- JPA ì—°ê´€ê´€ê³„ ì„¤ì •ë°©ë²•
  ğŸ‘‰ JPA ì˜ ê²½ìš°ëŠ” Enitity í´ë˜ìŠ¤ì˜ í•„ë“œ ìœ„ì— ì—°ê´€ê´€ê³„ ì–´ë…¸í…Œì´ì…˜ (@) ì„ ì„¤ì •í•´ ì£¼ëŠ” ê²ƒë§Œìœ¼ë¡œ ì—°ê´€ê´€ê³„ê°€ í˜•ì„±ë©ë‹ˆë‹¤.

- 'ìŒì‹ ë°°ë‹¬ ì„œë²„'ë¥¼ ê°œë°œí•œë‹¤ê³  ê°€ì •

  - @OneToMany / Order(1) : Food(N) --> ë°°ë‹¬ì£¼ë¬¸ 1ê°œì— ìŒì‹ ì—¬ëŸ¬ê°œ ì„ íƒ
  - @ManyToOne / Owner(1) : Restaurant(N) --> ìŒì‹ì  ì£¼ì¸ ì—¬ëŸ¬ëª…ì´ í•˜ë‚˜ì˜ ê°€ê²Œ ì†Œìœ 
  - @OneToOne / Order(1) : Coupon(1) --> ë°°ë‹¬ ì£¼ë¬¸ 1ê°œì— ì¿ í° 1ê°œë§Œ ì ìš© ê°€ëŠ¥
  - @ManyToMany / User(N) : Restaurant(N) --> ê³ ê°ì´ ìŒì‹ì  ì—¬ëŸ¬ê°œ ì°œ ê°€ëŠ¥ / ìŒì‹ì ì€ ê³ ê° ì—¬ëŸ¬ëª…ì—ê²Œ ì°œ ê°€ëŠ¥

- ì£¼ë¬¸ (Order)

```
@Enitity
public class Order {
    @OneToMany
    private List<Food> foods;

		@OneToOne
		private Coupon coupon;
}
```

- ìŒì‹ì ì£¼ (Owner)

```
@Entity
public class Owner {
	@ManyToOne
	Restaurant restaurant;
}
```

- ê³ ê° (User)

```
@Entity
public class User {
	@ManyToMany
	List<Restaurant> likeRestaurants;
}
```

## Spring Data JPA ì´í•´

- Spring Data JPA ëŠ”?
  - JPA ë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´, ìŠ¤í”„ë§ì—ì„œ JPA ë¥¼ Wrapping
  - ìŠ¤í”„ë§ ê°œë°œìë“¤ì´ JPA ë¥¼ ì‚¬ìš©í•  ë•Œ í•„ìˆ˜ì ìœ¼ë¡œ ìƒì„±í•´ì•¼ í•˜ë‚˜, ì˜ˆìƒ ê°€ëŠ¥í•˜ê³  ë°˜ë³µì ì¸ ì½”ë“œë“¤ â†’ Spring Data JPA ê°€ ëŒ€ì‹  ì‘ì„±
  - Repostiory ì¸í„°í˜ì´ìŠ¤ë§Œ ì‘ì„±í•˜ë©´, í•„ìš”í•œ êµ¬í˜„ì€ ìŠ¤í”„ë§ì´ ëŒ€ì‹  ì•Œì•„ì„œ ì²™ì²™!
